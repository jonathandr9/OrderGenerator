@page "/"

<PageTitle>Home</PageTitle>

<h1>Nova Ordem</h1>

<EditForm Model="@model" FormName="addOrder" OnSubmit="@OrderPost" class="align-content-center">

    <div class="form-group col-6">
        <label for="asset">Ativo</label>
        <InputSelect id="asset" @bind-Value="model.Asset" class="form-control">
            @foreach (var value in Enum.GetValues(typeof(AssetsList)))
            {
                <option>@value</option>
            }
        </InputSelect>
    </div>

    
    <label for="Side" class="mt-3">Lado</label>
    <div class="form-group col-6">
      @*   <label class="form-check-label">
            <input type="radio" class="form-check-input" name="side" value="C" @onchange="@(() => OnChangeSide("V"))" />
            Compra
        </label>
        <label class="form-check-label">
            <InputRadio class="form-check-input" TValue="" name="side" @onchange="@(() => OnChangeSide("V"))" />
            Venda
        </label>      *@    
        <InputRadioGroup @bind-Value="@model.Side">
            <InputRadio Value="SideValues.First()" />
            Compra
            <InputRadio Value="SideValues[1]" />
            Venda
        </InputRadioGroup>
    </div>

    <div class="form-group col-6 mt-3">
        <label for="quantity">Quantidade</label>
        <InputNumber id="quantity" @bind-Value="model.Quantity" class="form-control"></InputNumber>
    </div>

    <div class="form-group col-6 mt-3">
        <label for="amount">Preço</label>
        <InputNumber id="price" @bind-Value="model.Price" class="form-control" min="0.01" max="999.99" step="0.01" />
        <ValidationMessage For="@(() => model.Price)" />
    </div>

    <input type="submit" value="Adicionar" class="btn btn-primary mt-2"/>

</EditForm>

@code {
    [SupplyParameterFromForm]
    public Order? model { get; set; }
    public List<string> SideValues = new List<string> { "C", "V" };

    protected override void OnInitialized() => model ??= new();

    private void OrderPost()
    {
        Console.WriteLine($"{model.Asset} - {model.Side} - {model.Quantity} - {model.Price}");
    }

    private void OnChangeSide(string option)
    {
        model.Side = option;
    }
}


